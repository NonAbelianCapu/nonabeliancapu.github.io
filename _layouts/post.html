<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>{{ page.title | escape }} | {{ site.title | escape }}</title>
    <meta name="description" content="{{ page.excerpt | strip_html | strip_newlines | truncate: 160 | escape }}" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Fraunces:opsz,wght@9..144,500;9..144,600&family=IBM+Plex+Mono:wght@400;500&family=IBM+Plex+Sans:wght@400;500;700&display=swap" rel="stylesheet" />
    <link rel="stylesheet" href="{{ '/assets/css/portfolio.css' | relative_url }}" />
  </head>
  <body class="post-page">
    {% assign p = site.data.portfolio %}
    {% assign words = content | strip_html | number_of_words %}
    {% assign minutes = words | divided_by: 180 %}
    {% if minutes < 1 %}
      {% assign minutes = 1 %}
    {% endif %}

    <nav class="topbar">
      <div class="topbar-inner">
        <a class="brand" href="{{ '/index.html#top' | relative_url }}">{{ p.name }}</a>
        <ul class="menu">
          <li><a href="{{ '/index.html#about' | relative_url }}">About</a></li>
          <li><a href="{{ '/index.html#projects' | relative_url }}" class="is-active">Project Log</a></li>
          <li><a href="{{ '/index.html#research' | relative_url }}">Research</a></li>
          <li><a href="{{ '/resume.html' | relative_url }}">Resume</a></li>
        </ul>
      </div>
    </nav>

    <main class="page-shell post-shell">
      <article class="post-article">
        <header class="post-header">
          <h1>{{ page.title }}</h1>
          <p class="post-meta">
            {{ page.date | date: "%b %-d, %Y" }}
            {% if page.author %} | {{ page.author }}{% endif %}
            | {{ minutes }} min read
          </p>

          {% if page.tags and page.tags.size > 0 %}
            <div class="tag-list" aria-label="Tags">
              {% for tag in page.tags %}
                <span class="tag-pill">{{ tag }}</span>
              {% endfor %}
            </div>
          {% endif %}

          {% if page.repo or page.external_url %}
            <div class="link-row">
              {% if page.repo %}
                <a href="{{ page.repo }}" target="_blank" rel="noreferrer">[ {{ page.repo_label | default: 'Repository' }} ]</a>
              {% endif %}
              {% if page.external_url %}
                <a href="{{ page.external_url }}" target="_blank" rel="noreferrer">[ {{ page.external_label | default: 'Project Website' }} ]</a>
              {% endif %}
            </div>
          {% endif %}
        </header>

        {% if page.image and page.image.path %}
          <figure class="post-cover">
            <img src="{{ page.image.path | relative_url }}" alt="{{ page.title }}" />
          </figure>
        {% endif %}

        <section class="post-content">
          {{ content }}
        </section>

        <footer class="post-end">
          <a href="{{ '/index.html#projects' | relative_url }}">[ Back to project log ]</a>
          {% if page.previous.url %}
            <a href="{{ page.previous.url | relative_url }}">[ Newer: {{ page.previous.title }} ]</a>
          {% endif %}
          {% if page.next.url %}
            <a href="{{ page.next.url | relative_url }}">[ Older: {{ page.next.title }} ]</a>
          {% endif %}
        </footer>
      </article>

      <footer class="site-footer">
        <p>{{ 'now' | date: '%Y' }} {{ p.name }}</p>
        <p>Post layout rendered locally from custom templates.</p>
      </footer>
    </main>
  </body>
</html>
